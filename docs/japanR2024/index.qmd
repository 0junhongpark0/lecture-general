---
title: "医学研究のためのオープンソースR統計パッケージ"
author: "金珍燮（キム·ジンソプ)"
date: "2024-12-07"
format:
  revealjs: 
    theme: default
    logo: Zarathu Circle Clipping Mask2.png
    footer: "github.com/jinseob2kim"
    self-contained: false
    chalkboard: 
      buttons: false
    preview-links: true
    show-notes: false
    slide-number: false
    width: 1600
    height: 900
editor: visual
subtitle: "Zarathu Co., Ltd"
---

## 自己紹介

会社: ツァラトゥ株式会社(Zarathu Co.,Ltd)

-   R活用した医学研究支援
-   Rパッケージ開発, 教育

キャリア

-   Medical Doctor, 成均館(ソンギュングァン)大学, 韓国 (\~2009)
-   予防医学専門医、ソウル大学保健大学院 (\~2013)
-   エンジニア、サムスン電子無線事業部ヘルスサービスグループ (\~2016)
-   創業, Zarathu Co.,Ltd (2018\~)

**jinseob2kim\@gmail.com, github.com/jinseob2kim**

::: notes
こんにちは。私（わたくし）はキム・ジンソプと申（もう）します。本日（ほんじつ）は韓国（かんこく）の医学研究（いがくけんきゅうのためのオープンソースR統計(とうけい)パッケージ。

本発表では私が開発した医学研究用Rパッケージを紹介し、創業した会社でこれをどのように利用するのか、オープンソースパッケージの管理はどのようにするのか簡単に紹介します。 今後、日本のRユーザーの方々、医学研究者の方々と交流したいです。

私（わたくし）は韓国（かんこく）で「ツァラトゥ」という医学研究（いがくけんきゅう）支援（しえん）会社（かいしゃ）を創業（そうぎょう）し、6年間（ろくねんかん）運営（うんえい）しております。この会社（かいしゃ）は、研究者（けんきゅうしゃ）と製薬（せいやく）会社（かいしゃ）に分析（ぶんせき）サービスを提供（ていきょう）しています。私たちの分析（ぶんせき）機能（きのう）はRパッケージとしてCRANに公開（こうかい）されており、継続的（けいぞくてき）に更新（こうしん）しています。日本（にほん）のユーザーのブログでも度々（たびたび）紹介（しょうかい）されています。

私（わたくし）は韓国（かんこく）の医科大学（いかだいがく）を卒業（そつぎょう）後（ご）、保健（ほけん）大学院（だいがくいん）で予防医学（よぼういがく）を専攻（せんこう）し、その後（そのご）サムスン電子（でんし）の無線（むせん）事業部（じぎょうぶ）ヘルスサービスグループで勤務（きんむ）しました。
:::


## 医学研究のためのスR統計パッケージ

CRAN(計17万回ダウンロード)

-   [jskm](https://github.com/jinseob2kim/jskm): 生存分析 kaplan-meier plot
-   [jstable](https://github.com/jinseob2kim/jskm): 分析結果（記述統計、回帰、サブグループ分析）テーブル生成
-   [jsmodule](https://github.com/jinseob2kim/jskm): Shiny module & ローカルコンピュータでopenstat.aiを実行

<center><a href="https://github.com/jinseob2kim/"><img src="Unknown-2.png" width="50%"/></a></center>


::: notes
今回ご紹介するRパッケージは3つで、CRANから合計17万回ダウンロードされました。
콘카이 고쇼오카이스루 아아루팟케에지와 밋츠데, 크란 카라 고오케에 주우나나만카이 다운로오도사레마시타

第一に、生存分析のKaplan-meier絵を描くjskm、第二に、多様な回帰分析結果を論文用テーブルに作るjstable、最後に各分析機能をShiny moduleにして、これを集めてローカルで実行可能な分析ウェブを提供するjsmoduleです。
다이이치니, 세에존분세키노 카푸란마이아아에오 에가쿠 jskm, 다이 니니 타요오나 카이키분세키켓카오 론분요오테에부루니 츠쿠루 jstable, 사이고니 카쿠분세키키노오오 샤이니이 모주우루니 시테 코레오 아츠메테 로오카루데 짓코오 카노오나 분세키웨부오 테에쿄오스루 jsmodule 데스

以下のスクリーンショットは、3 パッケージのクランの累積ダウンロード数です。
이카노 스쿠리이쇼쯔토와 산 팟케에지노 쿠란노 루이세키다운로오도스우데스
:::



## 

<center><a href="https://github.com/jinseob2kim/jskm"><img src="jskm.png" width="100%"/></a></center>

::: columns
::: {.column width="50%"}
![](https://github.com/jinseob2kim/jskm/raw/master/man/figures/README-unnamed-chunk-1-2.png)
:::

::: {.column width="50%"}
![](https://github.com/jinseob2kim/jskm/raw/master/man/figures/README-unnamed-chunk-3-1.png)
:::
:::


::: notes
まず、JSKMをご紹介します。 このパッケージは医学研究で多く利用されるKapan-meierの絵のために作られ、Landmark分析、Competing risk分析、そしてアメリカ国民健康栄養調査のようなSurvey dataを支援することが最大の特徴です。
마즈 제에에스케에에무오 고쇼오카이시마스 코노 팟케에지와 이가쿠켄큐우데 오오쿠 리요오사레루 카판마이아아노 에노 타메니 츠쿠라레 란도마아쿠분세키 콘피티구 리스쿠분세키 소시테 아메리카 코쿠민켄코오에에요오초오사노요오나 사아베이 데에타오 시엔스루 코토가 사이다이노 토쿠초오데스
::: 


## 日本ブログレビュー

::: columns
::: {.column width="50%"}
![](jskm_japan.png)
:::

::: {.column width="50%"}
![](jskm_japan2.png)
:::
:::

Survey data, Landmark, Competing risk analysis support



::: notes
特に日本の研究者の方がランドマーク分析機能をたくさん利用してくださって、ブログレビューがたくさんあります。
토쿠니 니혼노 켄큐우샤노 호오가 란도마아쿠분세키키노오오 타쿠산 리요오시테쿠다삿테 부로구레뷰우가 타쿠산 아리마스
::: 

## 

<center><a href="https://github.com/jinseob2kim/jstable"><img src="jstable.png" width="100%"/></a></center>

::: columns
::: {.column width="50%"}
``` r
## Gaussian
glm_gaussian <- glm(mpg~cyl + disp, data = mtcars)
glmshow.display(glm_gaussian, decimal = 2)
```

``` r
$first.line
[1] "Linear regression predicting mpg\n"

$table
     crude coeff.(95%CI)   crude P value adj. coeff.(95%CI)    adj. P value
cyl  "-2.88 (-3.51,-2.24)" "< 0.001"     "-1.59 (-2.98,-0.19)" "0.034"
disp "-0.04 (-0.05,-0.03)" "< 0.001"     "-0.02 (-0.04,0)"     "0.054"

$last.lines
[1] "No. of observations = 32\nR-squared = 0.7596\nAIC value = 167.1456\n\n"
```
:::

::: {.column width="50%"}
``` r
## Binomial
glm_binomial <- glm(vs~cyl + disp, data = mtcars, family = binomial)
glmshow.display(glm_binomial, decimal = 2)
```

``` r
$first.line
[1] "Logistic regression predicting vs\n"
 
$table
     crude OR.(95%CI)   crude P value adj. OR.(95%CI)    adj. P value
cyl  "0.2 (0.08,0.56)"  "0.002"       "0.15 (0.02,1.02)" "0.053"     
disp "0.98 (0.97,0.99)" "0.002"       "1 (0.98,1.03)"    "0.715"     

$last.lines
[1] "No. of observations = 32\nAIC value = 23.8304\n\n"
```
:::
:::



::: notes
次はjstableです。 このパッケージは回帰分析結果を論文用テーブルにしてくれるパッケージで、単変量分析、univariate analysis結果を一緒に見せてくれるのが特徴です。 回帰分析、GLM、Cox、Linearmixed model、GEE、Survey glm、survey coxなど様々な回帰モデルをサポートします。 下のコードにあるように、glmshow.displayはGLM結果を示す関数です。
츠기와 제에에스티이에에비이에루이이데스 코노 팟케에지와 카이키분세키켓카오 론분요오테에부루니 시테쿠레루 팟케에지데 탄헨료오분세키 유우니붸리이아토 아나리시스켓카오 잇쇼니 미세테쿠레루노가 토쿠초오데스 카이키분세키 지이에루에무 시이옷쿠스 리니이아아밋쿠스토 모데루 지이 사아베이 지이에루에무 사아베이 콧쿠스나도 사마자마나 카이키모데루오 사포오토시마스 시타노 코오도니 아루요오니 지이에루에무에스에에치오오다부류우 디스푸레에와 지이에루에무켓카오 시메스 칸스우데스

::: 

## Subgroup analysis

```r
TableSubgroupMultiGLM(status ~ sex, var_subgroups = c("kk", "kk1"), data = lung, family = "binomial")
```

```r
    Variable Count Percent           OR Lower Upper P value P for interaction
sex2  Overall   228     100         3.01  1.65  5.47  <0.001              <NA>
1          kk  <NA>    <NA>         <NA>  <NA>  <NA>    <NA>             0.476
2           0    38    16.9            7   0.7 70.03   0.098              <NA>
3           1   187    83.1         2.94  1.55  5.57   0.001              <NA>
4         kk1  <NA>    <NA>         <NA>  <NA>  <NA>    <NA>             0.984
5           0     8     3.6 314366015.19     0   Inf   0.997              <NA>
6           1   217    96.4         2.85  1.55  5.25   0.001              <NA>
```

```r
TableSubgroupMultiCox(Surv(time, status) ~ sex, var_subgroups = c("kk", "kk1"), data = lung)
```

```r
    Variable Count Percent Point Estimate Lower Upper sex=1 sex=2 P value P for interaction
sex  Overall   228     100           1.91  1.14   3.2   100   100   0.014              <NA>
1       <NA>  <NA>    <NA>           <NA>  <NA>  <NA>  <NA>  <NA>    <NA>              <NA>
2         kk  <NA>    <NA>           <NA>  <NA>  <NA>  <NA>  <NA>    <NA>             0.525
3          0    38    16.9           2.88  0.31 26.49    10   100    0.35              <NA>
4          1   187    83.1           1.84  1.08  3.14   100   100   0.026              <NA>
5       <NA>  <NA>    <NA>           <NA>  <NA>  <NA>  <NA>  <NA>    <NA>              <NA>
6        kk1  <NA>    <NA>           <NA>  <NA>  <NA>  <NA>  <NA>    <NA>             0.997
7          0     8     3.6           <NA>  <NA>  <NA>     0   100    <NA>              <NA>
8          1   217    96.4           1.88  1.12  3.17   100   100   0.018              <NA>

```

::: notes
次はjstableです。 このパッケージは回帰分析結果を論文用テーブルにしてくれるパッケージで、単変量分析、univariate analysis結果を一緒に見せてくれるのが特徴です。 回帰分析、GLM、Cox、Linearmixed model、GEE、Survey glm、survey coxなど様々な回帰モデルをサポートします。 下のコードにあるように、glmshow.displayはGLM結果を示す関数です。
츠기와 제에에스티이에에비이에루이이데스 코노 팟케에지와 카이키분세키켓카오 론분요오테에부루니 시테쿠레루 팟케에지데 탄헨료오분세키 유우니붸리이아토 아나리시스켓카오 잇쇼니 미세테쿠레루노가 토쿠초오데스 카이키분세키 지이에루에무 시이옷쿠스 리니이아아밋쿠스토 모데루 지이 사아베이 지이에루에무 사아베이 콧쿠스나도 사마자마나 카이키모데루오 사포오토시마스 시타노 코오도니 아루요오니 지이에루에무에스에에치오오다부류우 디스푸레에와 지이에루에무켓카오 시메스 칸스우데스

::: 


## 中国での映像やブログレビュー

::: columns
::: {.column width="50%"}
![](jstable_ch.png)
:::

::: {.column width="50%"}
![](jstable_ch2.png)
:::
:::

## 

<center><a href="https://github.com/jinseob2kim/jsmodule"><img src="jsmodule.png" width="100%"/></a></center>

::: columns
::: {.column width="50%"}
![](https://github.com/jinseob2kim/jsmodule/blob/master/vignettes/figures/ps.png?raw=true)
:::

::: {.column width="50%"}
1~2行のコードだけで分析ウェブを作れるよう、各分析機能をモジュールとして開発

![](jsmodule2.png)
:::
:::

## 

![](그림1.png)


## 論文支援実績

SCI論文200編以上支援

- 医学分野 トップジャーナル NEJM、LANCET、JAMAを含む
- 6つの大学病院と年単位研究支援契約、10のバイオ会社の臨床試験分析支援

![](그림2.png)

## 無料統計ウェブ

-  よく利用される分析機能を無料で分析できるopenstat.ai 公開
-  jskm/jstable/jsmoduleの分析モジュールを適用

::: columns
::: {.column width="50%"}
[**openstat.ai**](https://openstat.ai/)**: free**

![](example-meta.png)
:::

::: {.column width="50%"}
**研究に合わせた分析ウェブは有料サービス**

![](https://oopy.lazyrockets.com/api/v2/notion/image?src=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F5a9631fa-d51e-4701-a2e8-c1087a0f2c3b%2FUntitled.png&blockId=05eff788-7894-4c2e-9cfe-b8056bc0bcd7)
:::
:::

## 国家R&D選定

3件の国家R&D支援事業を通じて技術開発および医学研究用の高度化を遂行

\`22 科学技術情報通信部「公開SW基盤のクラウド統計パッケージSW開発」(2年1億円)

-   統計非専攻者及び一般向け

\`23 情報通信産業振興院公開SW技術拡散支援事業(7ヶ月2000万円)

-   医学研究用

\`23 中小ベンチャー部 (1200万円)

-  医学研究用&臨床試験

## 著作権登録

<center><img src="jj.png" width="50%"/></a></center>

## オープンソース管理

::: columns
::: {.column width="50%"}
https://statgarten-issue.streamlit.app/

![](metric.png)
:::

::: {.column width="50%"}
Github action

- テスト、ホームページアップデート、ライセンス同意、コードstyle

![](ga.png)
:::
:::

## オープンソースライセンス検証

<center><img src="license.png" width="80%"/></a></center>

## R package: Shiny -\> exe

R必要なくexeファイルにしてローカル環境で実行 - [executablePackeR](https://github.com/ChangwooLim/executablePackeR)

<center><a href="https://www.r-bloggers.com/2023/03/creating-standalone-apps-from-shiny-with-electron-2023-macos-m1//"><img src="スクリーンショット 2024-04-17 午後12.02.26.png" width="50%"/></a></center>

## Rコミュニティ: Shinykorea

::: columns
::: {.column width="50%"}
-   定期的ミートアップ

![](スクリーンショット%202024-04-17%20午後3.02.34.png)
:::

::: {.column width="50%"}
-   コロナダッシュボード共同開発 ![](https://shinykorea.github.io/corona-activityrecord/d1.png)
:::
:::

## オープンソースの寄与:インターンシップ

::: columns
::: {.column width="50%"}
- 定期的に選抜


![](intern.png)
:::

::: {.column width="50%"}
-   インターンのオープンソースパッケージ開発参加

![](internr.png)
:::
:::

## 教育

成均館大学校バイオヘルス規制科学科兼任教授講義

-   https://github.com/jinseob2kim/r-skku-biohrs

-   R活用医療データ分析、講義録と講義映像を全て公開

<center><a href="https://github.com/jinseob2kim/r-skku-biohrs"><img src="biohrs.png" width="60%"/></a></center>

## With TokyoR

-   TokyoRミートアップ発表

<center>

> <img src="tokyor.png" width="80%"/></a>
>
> </center>

## 要約

- 医学研究用Rパッケージの開発、日本/中国で活用

- 国家R&D選定

- 最新オープンソース管理技術

- ライセンス検証

- オープンソースの活性化: コミュニティ、インターンシップ、教育

- 日本Rコミュニティ参加


# ご清聴、ありがとうございました。


::: notes
ご清聴（せいちょう）ありがとうございました。
:::

